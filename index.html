<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Exposure Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  background:#0b0b0b;
  color:#fff;
  font-family: system-ui, sans-serif;
  padding:30px;
}
h1{
  text-align:center;
  font-size:18px;
  opacity:.9;
  margin-bottom:25px;
}
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:30px;
  max-width:1200px;
  margin:auto;
}
.panel{
  background:#111;
  padding:20px;
  border-radius:14px;
}
label{
  font-size:12px;
  opacity:.6;
  margin-top:12px;
  display:block;
}
input, select{
  width:100%;
  padding:9px;
  background:#0b0b0b;
  border:1px solid #333;
  color:#fff;
  border-radius:8px;
  font-size:14px;
}
.row{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.radio-group{
  margin-top:15px;
  font-size:13px;
}
.radio-group label{
  display:block;
  margin:4px 0;
  opacity:.85;
}
button{
  display:block;
  margin:30px auto 20px;
  padding:12px 28px;
  font-size:14px;
  background:#fff;
  color:#000;
  border:none;
  border-radius:999px;
  cursor:pointer;
}
.result{
  text-align:center;
  font-family: ui-monospace, monospace;
  opacity:.9;
  margin-top:10px;
}
.disabled{
  opacity:.4;
}
</style>
</head>
<body>

<h1>Exposure Calculator</h1>

<div class="grid">

<!-- SOURCE -->
<div class="panel">
<h2>Source Exposure</h2>

<label>Camera</label>
<select id="l_cam">
  <option value="alexa">ARRI Alexa Mini LF</option>
  <option value="venice">Sony VENICE</option>
</select>

<label>T-Stop</label>
<input id="l_t" type="number" step="0.01" value="2.8">

<label>ISO</label>
<select id="l_iso"></select>

<label>ND (stops)</label>
<select id="l_nd"></select>

<div class="row">
  <div>
    <label>Shutter Angle (°)</label>
    <input id="l_sh" type="number" value="180">
  </div>
  <div>
    <label>Frame Rate</label>
    <input id="l_fps" type="number" value="25">
  </div>
</div>
</div>

<!-- TARGET -->
<div class="panel">
<h2>Target Exposure</h2>

<label>Camera</label>
<select id="r_cam">
  <option value="alexa">ARRI Alexa Mini LF</option>
  <option value="venice">Sony VENICE</option>
</select>

<div class="radio-group">
<strong>Calculate:</strong>
<label><input type="radio" name="calc" value="t"> T-Stop</label>
<label><input type="radio" name="calc" value="iso"> ISO</label>
<label><input type="radio" name="calc" value="nd" checked> ND</label>
<label><input type="radio" name="calc" value="sh"> Shutter Angle</label>
<label><input type="radio" name="calc" value="fps"> Frame Rate</label>
</div>

<label>T-Stop</label>
<input id="r_t" type="number" step="0.01">

<label>ISO</label>
<select id="r_iso"></select>

<label>ND (stops)</label>
<select id="r_nd"></select>

<div class="row">
  <div>
    <label>Shutter Angle (°)</label>
    <input id="r_sh" type="number">
  </div>
  <div>
    <label>Frame Rate</label>
    <input id="r_fps" type="number">
  </div>
</div>
</div>
</div>

<button onclick="calculate()">CALCULATE</button>
<div class="result" id="result"></div>

<script>
const cams = {
  alexa:{
    iso:[160,200,250,320,400,500,640,800,1000,1280,1600,2000,2560,3200],
    shMin:5, shMax:356, defISO:800
  },
  venice:{
    iso:[125,160,200,250,320,400,"500 (N1)",640,800,1000,1250,1600,2000,"2500 (N2)",3200,4000,5000,6400,8000,10000],
    shMin:4.2, shMax:360, defISO:500
  }
};

const nds=[0,0.3,0.6,0.9,1.2,1.5,1.8,2.1,2.4,2.7,3.0];

function fill(cam,isoEl,ndEl){
  isoEl.innerHTML="";
  cams[cam].iso.forEach(v=>{
    let o=document.createElement("option");
    o.value=parseFloat(v);
    o.text=v;
    isoEl.appendChild(o);
  });
  ndEl.innerHTML="";
  nds.forEach(v=>{
    let o=document.createElement("option");
    o.value=v;
    o.text=v===0?"Clear":v;
    ndEl.appendChild(o);
  });
}

fill("alexa",l_iso,l_nd);
fill("alexa",r_iso,r_nd);

l_cam.onchange=()=>fill(l_cam.value,l_iso,l_nd);
r_cam.onchange=()=>fill(r_cam.value,r_iso,r_nd);

const log2=x=>Math.log(x)/Math.log(2);
const shutter=(a,f)=>(a/360)*(1/f);

function exposure(t,iso,nd,sh,fps){
  return log2(iso*shutter(sh,fps)/(t*t)/Math.pow(2,nd));
}

function calculate(){
  const base=exposure(+l_t.value,+l_iso.value,+l_nd.value,+l_sh.value,+l_fps.value);
  const mode=document.querySelector("input[name=calc]:checked").value;
  let out="";

  if(mode==="nd"){
    const v=log2((+r_iso.value*shutter(+r_sh.value,+r_fps.value))/(Math.pow(+r_t.value,2)*Math.pow(2,base)));
    r_nd.value=v.toFixed(2);
    out=`ND = ${v.toFixed(2)} stops`;
  }
  if(mode==="iso"){
    const v=Math.pow(2,base)*Math.pow(+r_t.value,2)*Math.pow(2,+r_nd.value)/shutter(+r_sh.value,+r_fps.value);
    r_iso.value=Math.round(v);
    out=`ISO = ${Math.round(v)}`;
  }
  if(mode==="t"){
    const v=Math.sqrt((+r_iso.value*shutter(+r_sh.value,+r_fps.value))/(Math.pow(2,+r_nd.value)*Math.pow(2,base)));
    r_t.value=v.toFixed(2);
    out=`T-Stop = T${v.toFixed(2)}`;
  }
  if(mode==="sh"){
    const v=(Math.pow(2,base)*Math.pow(+r_t.value,2)*Math.pow(2,+r_nd.value)/+r_iso.value)*360*+r_fps.value;
    r_sh.value=v.toFixed(1);
    out=`Shutter = ${v.toFixed(1)}°`;
  }
  if(mode==="fps"){
    const v=(+r_sh.value/360)/(Math.pow(2,base)*Math.pow(+r_t.value,2)*Math.pow(2,+r_nd.value)/+r_iso.value);
    r_fps.value=v.toFixed(2);
    out=`FPS = ${v.toFixed(2)}`;
  }

  result.innerText=out;
}
</script>

</body>
</html>
